{
  "patch_id": "round124_patch",
  "previous_patch_id": "round123_patch",
  "round": 124,
  "date": "2026-01-22",
  "project": "Nethack-Roguelike",
  "summary": [
    "Introduced a shared, unit-testable scent-field helper (src/scent_field.hpp) that updates the per-turn scent trail deterministically (decay + deposit + single-pass spread).",
    "Extended scent propagation to be wind-biased using the game's existing deterministic per-level wind, yielding longer downwind trails and sharper upwind falloff.",
    "Upgraded smell-capable monster tracking to escape local scent plateaus with a bounded BFS, improving tracking robustness in tight corridors."
  ],
  "files_in_patch_zip": [
    "CHANGELOG.md",
    "PATCH_MANIFEST.json",
    "docs/PROCGEN_COLOR_PALETTE.md",
    "docs/PROCGEN_TERRAIN_FLUVIAL.md",
    "docs/PROCGEN_TILE_BORDERS.md",
    "docs/PROCGEN_VAULT_WFC.md",
    "src/ai.cpp",
    "src/bounty_gen.hpp",
    "src/combat.cpp",
    "src/crafting_gen.hpp",
    "src/dungeon.cpp",
    "src/dungeon.hpp",
    "src/farm_gen.hpp",
    "src/fishing_gen.hpp",
    "src/game.cpp",
    "src/game.hpp",
    "src/game_interact.cpp",
    "src/game_internal.hpp",
    "src/game_inventory.cpp",
    "src/game_look.cpp",
    "src/game_loop.cpp",
    "src/game_save.cpp",
    "src/game_spawn.cpp",
    "src/game_targeting.cpp",
    "src/items.cpp",
    "src/items.hpp",
    "src/main.cpp",
    "src/pet_gen.hpp",
    "src/render.cpp",
    "src/render.hpp",
    "src/settings.cpp",
    "src/settings.hpp",
    "src/spritegen.cpp",
    "src/spritegen.hpp",
    "docs/PROCGEN_TERRAIN_BIOLUM.md",
    "src/proc_rd.hpp",
    "src/game_world.cpp",
    "src/rng.hpp",
    "src/spatial_hash.hpp",
    "src/wfc.hpp",
    "src/scent_field.hpp",
    "tests/test_main.cpp"
  ],
  "files_changed_this_round": [
    "CHANGELOG.md",
    "PATCH_MANIFEST.json",
    "src/ai.cpp",
    "src/game_world.cpp",
    "tests/test_main.cpp"
  ],
  "files_added": [
    "src/scent_field.hpp"
  ],
  "notes": [
    "The scent simulation follows a classic roguelike approach (deposit + decay + relaxation/spread), but adds a small wind term to emulate advection: downwind propagation loses less intensity, upwind propagation loses more.",
    "AI smell tracking now performs a small bounded BFS when the local scent gradient is flat, preventing animals from stalling on plateaus/local maxima created by conservative diffusion."
  ],
  "generated_at": "2026-01-22T00:00:00Z"
}
