{
  "patch_id": "round211_patch",
  "previous_patch_id": "round210_patch",
  "round": 211,
  "created_utc": "2026-01-29T09:12:47Z",
  "summary": "Procedural leylines: a deterministic per-tile arcane resonance field that forms thin energy networks; boosts mana regen + improves casting on strong currents (LOOK shows LEY), with docs and tests.",
  "files_changed_or_added_this_round": [
    "CHANGELOG.md",
    "PATCH_MANIFEST.json",
    "docs/PROCGEN_LEYLINES.md",
    "src/dungeon.cpp",
    "src/dungeon.hpp",
    "src/game_look.cpp",
    "src/game_spawn.cpp",
    "src/game_spellcasting.cpp",
    "tests/test_main.cpp"
  ],
  "files_in_patch_zip": [
    "CHANGELOG.md",
    "PATCH_MANIFEST.json",
    "README.md",
    "SETTINGS.md",
    "docs/CORROSION_GEAR_AND_DOORS.md",
    "docs/ELECTRIC_CONDUCTION.md",
    "docs/MONSTER_TORCHES.md",
    "docs/MORALE_SHOCK.md",
    "docs/PROCGEN_COLOR_PALETTE.md",
    "docs/PROCGEN_ECOSYSTEM_CRAFTING_CATALYSTS.md",
    "docs/PROCGEN_ECOSYSTEM_GUARDIANS.md",
    "docs/PROCGEN_ECOSYSTEM_HAZARDS_AND_AMBIENCE.md",
    "docs/PROCGEN_ECOSYSTEM_LOOT_ECOLOGY.md",
    "docs/PROCGEN_ECOSYSTEM_MICROCLIMATES.md",
    "docs/PROCGEN_ECOSYSTEM_PULSES.md",
    "docs/PROCGEN_ECOSYSTEM_RESOURCE_NODES.md",
    "docs/PROCGEN_ECOSYSTEM_SIGILS.md",
    "docs/PROCGEN_ECOSYSTEM_SPAWN_ECOLOGY.md",
    "docs/PROCGEN_ECOSYSTEM_STEALTH_ECOLOGY.md",
    "docs/PROCGEN_GRAFFITI_RUMORS.md",
    "docs/PROCGEN_IDENT_APPEARANCES.md",
    "docs/PROCGEN_LEYLINES.md",
    "docs/PROCGEN_OVERWORLD_ATLAS.md",
    "docs/PROCGEN_OVERWORLD_GATES.md",
    "docs/PROCGEN_OVERWORLD_RIVERS.md",
    "docs/PROCGEN_OVERWORLD_WAYSTATIONS.md",
    "docs/PROCGEN_OVERWORLD_WEATHER.md",
    "docs/PROCGEN_RAYCAST3D_VIEW.md",
    "docs/PROCGEN_SHOPS.md",
    "docs/PROCGEN_SHRINES.md",
    "docs/PROCGEN_SIGILS.md",
    "docs/PROCGEN_SPRITE2D_HUESHIFT_AND_CLOTH.md",
    "docs/PROCGEN_SPRITE3D_BICONVEX_BEVEL.md",
    "docs/PROCGEN_SPRITE3D_CHAMFER_DISTANCE.md",
    "docs/PROCGEN_SPRITE3D_MATERIAL_CHAMFER.md",
    "docs/PROCGEN_SPRITE3D_RELIEF_EXTRUSION.md",
    "docs/PROCGEN_SPRITE3D_SOFT_BEVEL_ALPHA.md",
    "docs/PROCGEN_SPRITE3D_TEXTURE_SHELL.md",
    "docs/PROCGEN_TERRAIN_BIOLUM.md",
    "docs/PROCGEN_TERRAIN_FLUVIAL.md",
    "docs/PROCGEN_TERRAIN_MATERIAL_OVERLAYS.md",
    "docs/PROCGEN_TILE_BORDERS.md",
    "docs/PROCGEN_TRAP_SALVAGE.md",
    "docs/PROCGEN_VAULT_WFC.md",
    "docs/PROCGEN_WEAPON_EGOS.md",
    "docs/PROCGEN_WIN_CONDITIONS.md",
    "docs/REPLAY_RECORDING.md",
    "docs/ROUND208_NOTES.md",
    "src/action_info.hpp",
    "src/ai.cpp",
    "src/artifact_gen.hpp",
    "src/bounty_gen.hpp",
    "src/butcher_gen.hpp",
    "src/combat.cpp",
    "src/craft_tags.hpp",
    "src/crafting_gen.hpp",
    "src/dungeon.cpp",
    "src/dungeon.hpp",
    "src/ecosystem_loot.hpp",
    "src/effects.hpp",
    "src/farm_gen.hpp",
    "src/fishing_gen.hpp",
    "src/game.cpp",
    "src/game.hpp",
    "src/game_automove.cpp",
    "src/game_interact.cpp",
    "src/game_internal.hpp",
    "src/game_inventory.cpp",
    "src/game_look.cpp",
    "src/game_loop.cpp",
    "src/game_save.cpp",
    "src/game_spawn.cpp",
    "src/game_spellcasting.cpp",
    "src/game_targeting.cpp",
    "src/game_world.cpp",
    "src/graffiti_gen.hpp",
    "src/hearing_field.hpp",
    "src/ident_gen.hpp",
    "src/items.cpp",
    "src/items.hpp",
    "src/keybinds.cpp",
    "src/keybinds.hpp",
    "src/main.cpp",
    "src/noise_localization.hpp",
    "src/overworld.hpp",
    "src/pet_gen.hpp",
    "src/proc_names.hpp",
    "src/proc_rd.hpp",
    "src/proc_spells.hpp",
    "src/render.cpp",
    "src/render.hpp",
    "src/rng.hpp",
    "src/scent_field.hpp",
    "src/settings.cpp",
    "src/settings.hpp",
    "src/shop_profile_gen.hpp",
    "src/shrine_profile_gen.hpp",
    "src/sigil_gen.hpp",
    "src/spatial_hash.hpp",
    "src/spritegen.cpp",
    "src/spritegen.hpp",
    "src/spritegen3d.cpp",
    "src/trap_salvage_gen.hpp",
    "src/victory_gen.hpp",
    "src/wards.hpp",
    "src/wfc.hpp",
    "tests/test_main.cpp"
  ],
  "changed_files": [
    "CHANGELOG.md",
    "PATCH_MANIFEST.json",
    "src/game_spawn.cpp",
    "tests/test_main.cpp",
    "src/dungeon.hpp"
  ],
  "added_files": [
    "src/ecosystem_loot.hpp",
    "docs/PROCGEN_ECOSYSTEM_LOOT_ECOLOGY.md"
  ],
  "notes": [
    "Adds ecosystem-aware weapon ego (brand) weighting via pure helpers in src/ecosystem_loot.hpp.",
    "Adds small themed loot caches near some ecosystem seeds using a derived RNG stream (does not perturb main loot RNG).",
    "Refactors spawnItems() item drop helper to accept an RNG reference so derived streams can spawn items deterministically.",
    "Adds unit test guardrails for ecosystem ego bias direction/magnitude and documentation.",
    "Fixes a duplicate inline definition of ecosystemKindFlavor() in dungeon.hpp (compile error)."
  ]
}
