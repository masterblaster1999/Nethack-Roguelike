{
  "patch_id": "round155_patch",
  "previous_patch_id": "round154_patch",
  "round": 155,
  "date": "2026-01-25",
  "project": "Nethack-Roguelike",
  "summary": [
    "Expanded procedural item generation with an ego-weapon ecology pass: ego rolls are now biased by a deterministic per-floor theme plus room type + terrain material, making loot feel more coherent without becoming predictable.",
    "Added three new ego weapon brands (WEBBING/CORROSIVE/DAZING) with fully implemented combat procs (web, corrosion, confusion) and shop valuation support."
  ],
  "files_in_patch_zip": [
    "CHANGELOG.md",
    "PATCH_MANIFEST.json",
    "docs/PROCGEN_COLOR_PALETTE.md",
    "docs/PROCGEN_TERRAIN_BIOLUM.md",
    "docs/PROCGEN_TERRAIN_FLUVIAL.md",
    "docs/PROCGEN_TILE_BORDERS.md",
    "docs/PROCGEN_VAULT_WFC.md",
    "docs/MONSTER_TORCHES.md",
    "src/action_info.hpp",
    "src/ai.cpp",
    "src/artifact_gen.hpp",
    "src/bounty_gen.hpp",
    "src/combat.cpp",
    "src/crafting_gen.hpp",
    "src/dungeon.cpp",
    "src/dungeon.hpp",
    "src/effects.hpp",
    "src/farm_gen.hpp",
    "src/fishing_gen.hpp",
    "src/game.cpp",
    "src/game.hpp",
    "src/game_interact.cpp",
    "src/game_internal.hpp",
    "src/game_inventory.cpp",
    "src/game_look.cpp",
    "src/game_loop.cpp",
    "src/game_save.cpp",
    "src/game_spawn.cpp",
    "src/game_spellcasting.cpp",
    "src/game_targeting.cpp",
    "src/game_world.cpp",
    "src/hearing_field.hpp",
    "src/items.cpp",
    "src/items.hpp",
    "src/keybinds.cpp",
    "src/main.cpp",
    "src/noise_localization.hpp",
    "src/pet_gen.hpp",
    "src/proc_rd.hpp",
    "src/proc_spells.hpp",
    "src/render.cpp",
    "src/render.hpp",
    "src/rng.hpp",
    "src/scent_field.hpp",
    "src/settings.cpp",
    "src/settings.hpp",
    "src/spatial_hash.hpp",
    "src/spritegen.cpp",
    "src/spritegen.hpp",
    "src/wards.hpp",
    "src/wfc.hpp",
    "tests/test_main.cpp",
    "docs/ELECTRIC_CONDUCTION.md",
    "docs/CORROSION_GEAR_AND_DOORS.md",
    "docs/MORALE_SHOCK.md",
    "src/spritegen3d.cpp",
    "docs/PROCGEN_SPRITE3D_RELIEF_EXTRUSION.md",
    "docs/PROCGEN_SPRITE3D_MATERIAL_CHAMFER.md",
    "docs/PROCGEN_SPRITE3D_BICONVEX_BEVEL.md",
    "docs/PROCGEN_SPRITE3D_TEXTURE_SHELL.md",
    "docs/PROCGEN_SPRITE3D_CHAMFER_DISTANCE.md",
    "docs/PROCGEN_SPRITE3D_SOFT_BEVEL_ALPHA.md",
    "docs/PROCGEN_SPRITE2D_HUESHIFT_AND_CLOTH.md",
    "docs/PROCGEN_WEAPON_EGOS.md"
  ],
  "files_changed_this_round": [
    "src/items.hpp",
    "src/game_spawn.cpp",
    "src/combat.cpp",
    "docs/PROCGEN_WEAPON_EGOS.md",
    "CHANGELOG.md",
    "PATCH_MANIFEST.json"
  ],
  "files_added": [
    "docs/PROCGEN_WEAPON_EGOS.md"
  ],
  "notes": "Round 155 shifts procgen focus from sprite work to gameplay content generation. Weapon egos (rare melee brands) have been expanded with three new brands\u2014WEBBING, CORROSIVE, and DAZING\u2014and the ego roll now uses a lightweight \u201cecology\u201d weighting pass. A dominant ego is selected deterministically per floor (runSeed+depth) and then combined with room-type and terrain-material nudges (e.g., volcanic stone leans FLAMING; lairs lean WEBBING/VENOM; labs lean CORROSIVE). This makes branded loot feel like it belongs to the spaces you find it while preserving randomness. All new egos are appended to ItemEgo for save compatibility.",
  "generated_at": "2026-01-25T07:46:02Z"
}
