# Procedural Tile Borders (Room Trim Autotiling)

This project already generates most terrain art procedurally. This round adds one more layer of **procedural tile generation**: a lightweight, deterministic *room-trim / floor-border* system that draws subtle accent lines around themed rooms (treasure rooms, shrines, vaults, shops, etc).

The goal is to make special rooms read instantly without hand-authored tilesets, while keeping the visuals consistent across both top-down and isometric rendering.

## Overview

We generate a **transparent overlay sprite** for each:

- **room style** (derived from room type)
- **4-neighbor edge mask** (N/E/S/W)
- **variant** (tiny stylistic variation to reduce repetition)
- **animation frame** (used for subtle pulsing/sparkles in some styles)

At runtime the renderer:

1. Computes the current tile’s *border style* (strictly room-based + door tiles).
2. Builds a 4-bit mask indicating which edges are boundaries.
3. Renders the matching overlay on top of the base floor tile.

The mask uses the conventional 4-bit encoding:

- `1` = North edge
- `2` = East edge
- `4` = South edge
- `8` = West edge

This is the same encoding already used for other autotile overlays (wall shading, wall edges, chasm rims), so everything stays consistent.

## Border style vs floor style

`floorStyleAt()` is intentionally permissive and can “bleed” themed styles into adjacent tiles to make door thresholds look better.

Borders need to be stricter, so we introduce a separate lookup:

- **`borderStyleAt()`** returns a non-zero style only for:
  - tiles inside themed rooms (from `roomTypeCache`)
  - **door tiles** leading into those rooms

This prevents trim borders from showing up in corridors next to a special room.

## Style motifs

Each style’s border overlay is generated procedurally (no external art):

- **Treasure**: brighter gilded line with occasional animated sparkles
- **Lair**: softer edge with subtle slime drips
- **Shrine**: pulsing runic ticks
- **Secret**: faint dusty trim
- **Vault**: crisp inlay with rivet studs
- **Shop**: stitched trim pattern

## Isometric support

The isometric version is generated by projecting the same 16×16 square overlays into a 2:1 diamond, then resampling. This keeps the style language consistent between the two render modes without requiring a second bespoke tile set.

---
